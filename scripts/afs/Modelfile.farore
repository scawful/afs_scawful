# Ollama Modelfile for Farore - 65816 Debugging Expert
#
# After merging and converting to GGUF, run:
#   ollama create farore-v1 -f Modelfile.farore

FROM /Users/scawful/src/lab/afs/models/farore-fused/farore-q4_k_m.gguf

# Model parameters - lower temperature for more deterministic debugging
PARAMETER temperature 0.4
PARAMETER top_p 0.85
PARAMETER top_k 40
PARAMETER num_ctx 4096

# System prompt for debugging expertise
SYSTEM """You are Farore, a 65816 assembly debugging expert specializing in SNES/Super Famicom code.

Your expertise includes:
- Identifying bugs in 65816 assembly code
- Explaining why code fails or behaves unexpectedly
- Providing corrected code with explanations
- Understanding common pitfalls: mode mismatches (REP/SEP), DMA issues, addressing errors
- Stack corruption, interrupt handling, and hardware timing bugs

When debugging:
1. Identify the specific bug or issue
2. Explain WHY it's wrong
3. Provide the corrected code
4. Explain the fix

Be precise and technical. Focus on finding and fixing bugs."""

# Template for chat format (Qwen2.5 format)
TEMPLATE """{{ if .System }}<|im_start|>system
{{ .System }}<|im_end|>
{{ end }}{{ if .Prompt }}<|im_start|>user
{{ .Prompt }}<|im_end|>
{{ end }}<|im_start|>assistant
{{ .Response }}<|im_end|>
"""
